# simple_ui_for_comfy

# –¢–ó

# üß≠ –û–±—â–∞—è —Ü–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–∏—Å (FastAPI), –∫–æ—Ç–æ—Ä—ã–π:
    - —É–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ ComfyUI —Å–µ—Ä–≤–µ—Ä–∞–º–∏ (GPU workers)
    - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π UI –≤–º–µ—Å—Ç–æ ComfyUI
    - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö workflow
    - –∏–º–µ–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
    - –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º –∏ —Å—Ö–µ–º–∞–º
    - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Å–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    - –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–µ—Ä–≤–µ—Ä–∞ –∏ workflow –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

# üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∏—Ç–æ–≥–æ–≤–∞—è)
[ Web UI (Users + Admin) ]
            |
        [ FastAPI ]
            |
 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
 |          |          |
[ ComfyUI ][ ComfyUI ][ ComfyUI ] ... (GPU nodes)


## FastAPI:
    - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
    - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    - —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è workflow
    - —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    - API –¥–ª—è UI

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
    - User
    - Role (USER / ADMIN)
    - ComfyNode (GPU —Å–µ—Ä–≤–µ—Ä)
    - Workflow (json + spec)
    - Job (–∑–∞–ø—É—Å–∫)
    - Files (images / masks / results)

# üóÇÔ∏è –≠–¢–ê–ü 0 ‚Äî –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

‚è± 1‚Äì2 –¥–Ω—è
üéØ –¶–µ–ª—å: –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å

    0.1 ER-–º–æ–¥–µ–ª—å –ë–î
        - User
        - ComfyNode
        - Workflow
        - Job

    0.2 Workflow Spec v1.0 (JSON Schema)
        - inputs
        - mask
        - validation
        - mapping node ‚Üí field

    0.3 API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
        - user
        - admin
        - generate
        - status

    üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç:
        - —Å—Ö–µ–º—ã
        - —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
        - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

# üß± –≠–¢–ê–ü 1 ‚Äî –ë–∞–∑–æ–≤—ã–π backend (—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç)

‚è± 3‚Äì5 –¥–Ω–µ–π
üéØ –¶–µ–ª—å: —Ä–∞–±–æ—á–∞—è —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –±–µ–∑ UI

    1.1 FastAPI skeleton
        - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
        - config
        - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

    1.2 –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
        - PostgreSQL
        - SQLAlchemy / SQLModel
        - Alembic

    1.3 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
        - JWT
        - refresh token
        - bcrypt
        - —Ä–æ–ª–∏

    1.4 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        - CRUD users (admin)
        - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
        - –ª–∏–º–∏—Ç—ã

    üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç:
        - –º–æ–∂–Ω–æ –ª–æ–≥–∏–Ω–∏—Ç—å—Å—è
        - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        - –µ—Å—Ç—å —Ä–æ–ª–∏

# üñ•Ô∏è –≠–¢–ê–ü 2 ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ComfyUI —Å–µ—Ä–≤–µ—Ä–∞–º–∏

‚è± 2‚Äì3 –¥–Ω—è
üéØ –¶–µ–ª—å: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ GPU

    2.1 ComfyNode –º–æ–¥–µ–ª—å
        - name
        - base_url
        - is_active
        - max_queue
        - priority

    2.2 Admin API
        - –¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
        - —É–¥–∞–ª–∏—Ç—å
        - –≤–∫–ª—é—á–∏—Ç—å / –≤—ã–∫–ª—é—á–∏—Ç—å
        - —Å–º–µ–Ω–∏—Ç—å IP

    2.3 Healthcheck
        - /queue
        - /system_stats
        - heartbeat

    2.4 Scheduler
        - –≤—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–∞
        - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ offline
        - –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è

    üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç:
        - FastAPI —É–ø—Ä–∞–≤–ª—è–µ—Ç 4+ GPU —Å–µ—Ä–≤–µ—Ä–∞–º–∏
        - —Å–µ—Ä–≤–µ—Ä–∞ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

# üß© –≠–¢–ê–ü 3 ‚Äî Workflow Management (–∫–ª—é—á–µ–≤–æ–π —ç—Ç–∞–ø)

‚è± 4‚Äì6 –¥–Ω–µ–π
üéØ –¶–µ–ª—å: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è 14 —Å—Ö–µ–º

    3.1 Workflow –º–æ–¥–µ–ª—å
        - name
        - version
        - category
        - is_active
        - requires_mask

    3.2 Workflow Spec v1.0
        - inputs
        - types
        - node mapping
        - validation

    3.3 Admin –∑–∞–≥—Ä—É–∑–∫–∞ workflow
        - upload workflow.json
        - upload spec.json
        - –≤–∞–ª–∏–¥–∞—Ü–∏—è
        - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

    3.4 UI-schema API
        - –æ—Ç–¥–∞—á–∞ spec
        - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º

    üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç:
        - –≤—Å–µ 14 —Å—Ö–µ–º —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã
        - –Ω–æ–≤—ã–µ —Å—Ö–µ–º—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

# üß™ –≠–¢–ê–ü 4 ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ Job-—Å–∏—Å—Ç–µ–º–∞

‚è± 3‚Äì4 –¥–Ω—è
üéØ –¶–µ–ª—å: —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á

    4.1 Job –º–æ–¥–µ–ª—å
        - user
        - workflow
        - node
        - status
        - timestamps

    4.2 ComfyUI client
        - POST /prompt
        - history
        - view

    4.3 Job lifecycle
        - QUEUED
        - RUNNING
        - DONE
        - ERROR

    4.4 Status API
        - polling
        - WebSocket (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

    üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç:
        - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç workflow
        - –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

# üé® –≠–¢–ê–ü 5 ‚Äî –ú–∞—Å–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

‚è± 2‚Äì3 –¥–Ω—è
üéØ –¶–µ–ª—å: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ö–µ–º

    5.1 –¢–∏–ø mask –≤ spec
        - required / optional
        - node binding

    5.2 Backend normalization
        - resize
        - grayscale
        - PNG

    5.3 UI
        - upload mask
        - draw mask (canvas)

    üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç:
        - –ª—é–±—ã–µ workflow —Å –º–∞—Å–∫–æ–π —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

# üßë‚Äçüíª –≠–¢–ê–ü 6 ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

‚è± 4‚Äì7 –¥–Ω–µ–π
üéØ –¶–µ–ª—å: –∑–∞–º–µ–Ω–∏—Ç—å ComfyUI –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

    6.1 User UI
        - —Å–ø–∏—Å–æ–∫ workflows
        - —Ñ–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        - –ø—Ä–æ–≥—Ä–µ—Å—Å
        - –≥–∞–ª–µ—Ä–µ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

    6.2 Admin UI
        - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
        - GPU nodes
        - workflows
        - jobs

    üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç:
        - ComfyUI —Å–∫—Ä—ã—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        - –≤—Å—ë —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

# üöÄ –≠–¢–ê–ü 7 ‚Äî –ü—Ä–æ–¥–∞–∫—à–µ–Ω –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

‚è± 2‚Äì3 –¥–Ω—è

    7.1 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
        - rate limit
        - –ª–∏–º–∏—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

    7.2 –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
        - –æ—à–∏–±–∫–∏
        - –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        - –∑–∞–≥—Ä—É–∑–∫–∞ GPU

    7.3 –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–æ—Å—Ç—É
        - Redis (–æ—á–µ—Ä–µ–¥–∏)
        - –Ω–µ—Å–∫–æ–ª—å–∫–æ FastAPI –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

    üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç:
        - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞

# üìå –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

    ‚úî 4+ ComfyUI —Å–µ—Ä–≤–µ—Ä–∞
    ‚úî 14+ workflow
    ‚úî –ê–¥–º–∏–Ω–∫–∞
    ‚úî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
    ‚úî –ú–∞—Å–∫–∏
    ‚úî –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
    ‚úî –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å SaaS / –∫–æ–º–º–µ—Ä—Ü–∏–∏