{% extends 'admin/base.html' %}

{% block content %}

<h2>Upload workflow</h2>

<form method="post" action="/admin/workflows/upload/generate_spec" style="margin-bottom: 16px">
    <label>Workflow JSON</label><br>
    <textarea name="workflow_json" rows="12" cols="90" required>{{ workflow_json or '' }}</textarea><br><br>

    <button type="submit">⚙️ Generate Spec</button>
</form>

<form method="post" action="/admin/workflows/upload">
    <label>Name</label><br>
    <input type="text" name="name" required><br><br>

    <label>Slug</label><br>
    <input type="text" name="slug" required><br><br>

    <label>Category</label><br>
    <input type="text" name="category"><br><br>

    <label>Spec JSON</label><br>
    <textarea name="spec_json" rows="12" cols="90" required>{{ spec_json | default({}) | tojson(indent=2) }}</textarea><br><br>

    <input type="hidden" name="workflow_json" value="{{ workflow_json | default({}) | tojson }}">

    <button type="submit">Upload</button>
</form>

<p><a href="/admin/workflows">← Back</a></p>

{% endblock %}